â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          GUIA COMPLETO - STRIPE EDGE FUNCTIONS & SECRETS          â•‘
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¦ EDGE FUNCTIONS DO STRIPE (5 no total)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£  get-stripe-config
   ğŸ“ Local: /supabase/functions/get-stripe-config/index.ts
   ğŸ¯ FunÃ§Ã£o: Retorna as chaves pÃºblicas para o frontend
   ğŸ”‘ Usa: STRIPE_PUBLISHABLE_KEY, STRIPE_WEBHOOK_SECRET
   
2ï¸âƒ£  create-stripe-payment-intent
   ğŸ“ Local: /supabase/functions/create-stripe-payment-intent/index.ts
   ğŸ¯ FunÃ§Ã£o: Cria PaymentIntent no Stripe
   ğŸ”‘ Usa: STRIPE_SECRET_KEY
   
3ï¸âƒ£  activate-stripe-plan
   ğŸ“ Local: /supabase/functions/activate-stripe-plan/index.ts
   ğŸ¯ FunÃ§Ã£o: Ativa plano apÃ³s pagamento (Agendamentos/WhatsApp)
   ğŸ”‘ Usa: STRIPE_SECRET_KEY
   
4ï¸âƒ£  activate-stripe-ligacoes
   ğŸ“ Local: /supabase/functions/activate-stripe-ligacoes/index.ts
   ğŸ¯ FunÃ§Ã£o: Ativa plano de ligaÃ§Ãµes apÃ³s pagamento
   ğŸ”‘ Usa: STRIPE_SECRET_KEY
   
5ï¸âƒ£  stripe-webhook
   ğŸ“ Local: /supabase/functions/stripe-webhook/index.ts
   ğŸ¯ FunÃ§Ã£o: Recebe notificaÃ§Ãµes do Stripe (backup)
   ğŸ”‘ Usa: STRIPE_SECRET_KEY, STRIPE_WEBHOOK_SECRET

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” SECRETS QUE VOCÃŠ DEVE CONFIGURAR (3 no total)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”— ONDE CONFIGURAR:
https://supabase.com/dashboard/project/hedxxbsieoazrmbayzab/settings/functions
Clique na aba "Secrets" â†’ "Add new secret"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SECRET #1                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Name (cole exatamente):                                         â”‚
â”‚ STRIPE_PUBLISHABLE_KEY                                          â”‚
â”‚                                                                 â”‚
â”‚ Value (cole exatamente):                                        â”‚
â”‚ pk_live_51SfTiJABFcfGgf231n03PL9pKY6Q98L7CDsKrqcKnGCcYWBVTVBiiâ”‚
â”‚ UJAPHAR5yhImUCjxnxGjWgFy2WamZTeN4h100UrOFkIte                  â”‚
â”‚                                                                 â”‚
â”‚ â„¹ï¸  Chave pÃºblica - usada no frontend                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SECRET #2                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Name (cole exatamente):                                         â”‚
â”‚ STRIPE_SECRET_KEY                                               â”‚
â”‚                                                                 â”‚
â”‚ Value (cole exatamente):                                        â”‚
â”‚ sk_live_51SfTiJABFcfGgf23D3U3YCETdVPgzoAu7o5J7nHlMl6U3XRKGRYâ”‚
â”‚ dsEw5bVdLVoC6aWw6mawb4RRAyTAQEcDNnPFc00IB2VxBY5               â”‚
â”‚                                                                 â”‚
â”‚ âš ï¸  Chave secreta - NUNCA exponha publicamente                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SECRET #3                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Name (cole exatamente):                                         â”‚
â”‚ STRIPE_WEBHOOK_SECRET                                           â”‚
â”‚                                                                 â”‚
â”‚ Value (cole exatamente):                                        â”‚
â”‚ whsec_2jJPED4hKGOMfFmU96IdFghL23QJf6fB                         â”‚
â”‚                                                                 â”‚
â”‚ â„¹ï¸  Secret do webhook - valida eventos do Stripe              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ DEPLOY DAS FUNCTIONS (depois de configurar secrets)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPÃ‡ÃƒO 1 - Via CLI (requer login):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
npx supabase login
npx supabase link --project-ref hedxxbsieoazrmbayzab
npx supabase functions deploy get-stripe-config
npx supabase functions deploy create-stripe-payment-intent
npx supabase functions deploy activate-stripe-plan
npx supabase functions deploy activate-stripe-ligacoes
npx supabase functions deploy stripe-webhook

OPÃ‡ÃƒO 2 - Via Dashboard:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Acesse: https://supabase.com/dashboard/project/hedxxbsieoazrmbayzab/functions
2. Clique em cada funÃ§Ã£o
3. Clique em "Deploy"

OPÃ‡ÃƒO 3 - Deploy automÃ¡tico via Git:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
git push origin main
(Se tiver GitHub Actions configurado)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CHECKLIST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ 1. Configurei STRIPE_PUBLISHABLE_KEY no Supabase Dashboard
â–¡ 2. Configurei STRIPE_SECRET_KEY no Supabase Dashboard
â–¡ 3. Configurei STRIPE_WEBHOOK_SECRET no Supabase Dashboard
â–¡ 4. Deploy da funÃ§Ã£o: get-stripe-config
â–¡ 5. Deploy da funÃ§Ã£o: create-stripe-payment-intent
â–¡ 6. Deploy da funÃ§Ã£o: activate-stripe-plan
â–¡ 7. Deploy da funÃ§Ã£o: activate-stripe-ligacoes
â–¡ 8. Deploy da funÃ§Ã£o: stripe-webhook
â–¡ 9. Testei pagamento no frontend
â–¡ 10. Verifiquei logs: "Production keys loaded successfully"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTAR SE FUNCIONOU
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Abra seu site
2. Abra Console do navegador (F12)
3. VÃ¡ para pÃ¡gina de pagamento
4. Procure nos logs:

   âœ… "ğŸ”§ [STRIPE-CONFIG] Production keys loaded successfully"
   âœ… "ğŸ”§ [STRIPE-KEYS] Production keys loaded successfully"
   âœ… "ğŸ”§ [STRIPE] Initializing Stripe with PRODUCTION key"

5. Tente fazer um pagamento de teste (R$ 1,00)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ URLs IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Supabase Dashboard:
https://supabase.com/dashboard/project/hedxxbsieoazrmbayzab

Secrets Configuration:
https://supabase.com/dashboard/project/hedxxbsieoazrmbayzab/settings/functions

Functions List:
https://supabase.com/dashboard/project/hedxxbsieoazrmbayzab/functions

Stripe Dashboard:
https://dashboard.stripe.com/apikeys

Stripe Webhooks:
https://dashboard.stripe.com/webhooks

